<!DOCTYPE html>
<html>
<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
</head>
<body>
  <button class='refresh'>Load New Tweets</button>
  <div class="tweets"></div>
  <script>

    $(document).ready(function(){
      // Main structural "constants"
      var $tweets = $('.tweets');
      var $refreshButton = $('.refresh');


      // Main Functions
      var displayTweets = function() {
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div class="tweet"></div>');
          var $author = $('<span class="author"></span>').text('@' + tweet.user);
          var $msg = $('<span class="msg"></span>').text(tweet.message);
          var $time = $('<time></time>', {
            attr: {'datetime': tweet.created_at},
            text: tweet.created_at});
          $tweet.append($author, ': ', $msg, '<br />', $time);
          $tweet.appendTo($tweets);
          index -= 1;
        }
      }

      var clearTweets = function() {
        $('.tweets div').remove();
      }

      var refreshTweets = function() {
        clearTweets();
        displayTweets();
      }


      // Event Handlers
      $refreshButton.on('click', refreshTweets);


      // Initialize Display
      displayTweets();
    });

  </script>
</body>
</html>
